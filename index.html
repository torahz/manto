<!DOCTYPE html>
<html lang="pt">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Sorteio Pentecostal</title>
  <link rel="manifest" href="manifest.json">
  <link rel="icon" type="image/png" href="icon-192x192.png">
  <meta name="theme-color" content="#000000">
  <style>
    body {
      margin: 0;
      padding: 0;
      background: black;
      color: gold;
      font-family: Arial, sans-serif;
      text-align: center;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      height: 100vh;
      overflow: hidden;
      position: relative;
    }
    
    /* Efeito de fogo melhorado */
    .fire-container {
      position: absolute;
      bottom: 0;
      left: 0;
      width: 100%;
      height: 50%;
      overflow: hidden;
      z-index: -1;
    }
    
    .flame {
      position: absolute;
      bottom: -20px;
      width: 20px;
      height: 60px;
      background: linear-gradient(to top, transparent, orange, red);
      border-radius: 50% 50% 20% 20%;
      filter: blur(5px);
      opacity: 0.8;
      animation: flicker 0.5s infinite alternate, rise 2s infinite;
    }
    
    @keyframes flicker {
      0% { opacity: 0.5; height: 50px; }
      100% { opacity: 0.9; height: 70px; }
    }
    
    @keyframes rise {
      0% { transform: translateY(0) scale(1); }
      100% { transform: translateY(-40px) scale(0.8); opacity: 0; }
    }
    
    button {
      font-size: 1.2em;
      padding: 15px 25px;
      background: linear-gradient(45deg, red, orange, yellow);
      color: white;
      border: none;
      cursor: pointer;
      border-radius: 10px;
      box-shadow: 0 0 20px rgba(255, 0, 0, 0.8);
      transition: 0.3s;
      margin-bottom: 20px;
    }
    
    button:hover {
      box-shadow: 0 0 30px rgba(255, 69, 0, 1);
      transform: scale(1.1);
    }
    
    #result-container {
      width: 280px;
      height: 100px;
      overflow: hidden;
      margin: 20px auto;
      border: 3px solid gold;
      border-radius: 10px;
      box-shadow: 0 0 20px rgba(255, 215, 0, 0.6);
      position: relative;
      background: rgba(0, 0, 0, 0.6);
    }
    
    .slot {
      position: relative;
      height: 100px;
      overflow: hidden;
    }
    
    .slot-window {
      width: 100%;
      height: 100%;
      overflow: hidden;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    
    .slot-items {
      position: absolute;
      width: 100%;
      transition: top 3s cubic-bezier(0.1, 0.3, 0.3, 1);
    }
    
    .slot-item {
      height: 100px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.8em;
      color: gold;
      text-shadow: 0 0 10px rgba(255, 215, 0, 0.8);
      font-weight: bold;
    }
    
    /* Bot√£o instalar */
    #installButton {
      position: fixed;
      bottom: 20px;
      right: 20px;
      padding: 10px 15px;
      background: linear-gradient(45deg, #4CAF50, #8BC34A);
      color: white;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      z-index: 10;
      box-shadow: 0 0 10px rgba(76, 175, 80, 0.7);
      display: none; /* Escondido inicialmente */
    }
    
    #installButton:hover {
      transform: scale(1.05);
    }
    
    .title {
      font-size: 2.5em;
      margin-bottom: 30px;
      color: gold;
      text-shadow: 0 0 15px rgba(255, 215, 0, 0.8);
    }
    
    /* Controle de √°udio */
    #audioControls {
      position: fixed;
      top: 20px;
      right: 20px;
      z-index: 10;
      display: flex;
      align-items: center;
      justify-content: center;
      background: rgba(0, 0, 0, 0.5);
      padding: 5px;
      border-radius: 5px;
      border: 1px solid gold;
    }
    
    #toggleAudio {
      background: transparent;
      color: gold;
      border: none;
      cursor: pointer;
      font-size: 24px;
      padding: 5px;
      margin: 0;
      width: 40px;
      height: 40px;
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: none;
    }
    
    #toggleAudio:hover {
      color: white;
      transform: none;
      box-shadow: none;
    }
  </style>
</head>
<body>
  <div class="fire-container" id="fireContainer"></div>
  
  <!-- Elemento de √°udio para o som de fundo -->
  <audio id="backgroundAudio" loop>
    <source src="fire-ambient.mp3" type="audio/mp3">
  </audio>
  
  <!-- Elementos de √°udio para os sons de clique (10 varia√ß√µes) -->
  <audio id="clickSound1" preload="auto">
    <source src="click1.mp3" type="audio/mp3">
  </audio>
  <audio id="clickSound2" preload="auto">
    <source src="click2.mp3" type="audio/mp3">
  </audio>
  <audio id="clickSound3" preload="auto">
    <source src="click3.mp3" type="audio/mp3">
  </audio>
  <audio id="clickSound4" preload="auto">
    <source src="click4.mp3" type="audio/mp3">
  </audio>
  <audio id="clickSound5" preload="auto">
    <source src="click5.mp3" type="audio/mp3">
  </audio>
  <audio id="clickSound6" preload="auto">
    <source src="click6.mp3" type="audio/mp3">
  </audio>
  <audio id="clickSound7" preload="auto">
    <source src="click7.mp3" type="audio/mp3">
  </audio>
  <audio id="clickSound8" preload="auto">
    <source src="click8.mp3" type="audio/mp3">
  </audio>
  <audio id="clickSound9" preload="auto">
    <source src="click9.mp3" type="audio/mp3">
  </audio>
  <audio id="clickSound10" preload="auto">
    <source src="click10.mp3" type="audio/mp3">
  </audio>
  
  <!-- Controle para ligar/desligar o som de fundo -->
  <div id="audioControls">
    <button id="toggleAudio">üîä</button>
  </div>
  
  <h1 class="title">Sorteio Pentecostal</h1>
  
  <button id="sorteioBtn">Clica a√≠ oh GL√ìRIA!</button>
  
  <div id="result-container">
    <div class="slot">
      <div class="slot-window">
        <div id="slotItems1" class="slot-items">
          <!-- Itens ser√£o inseridos dinamicamente -->
        </div>
      </div>
    </div>
  </div>
  
  <div id="result-container">
    <div class="slot">
      <div class="slot-window">
        <div id="slotItems2" class="slot-items">
          <!-- Itens ser√£o inseridos dinamicamente -->
        </div>
      </div>
    </div>
  </div>
  
  <button id="installButton">Instalar App</button>
  
  <script>
    // Arrays com os nomes
    const nomesParte1 = [
      "Robicundo", "Carabina", "Face", "Dente", "Saliva", "Sapato", "Var√£o", "Xereben√©bias", "Decanturabias", "Subicantas", "Siridissaianalavala", "Manassubrias", "Teclen√∫bias", "Daraman√°sia", "Suricantalas", "Xarabacandaras", "Lebirassubias", "Tenebrass√∫rias", "Kandarass√∫bias", "Florissandoras", "Derecantas√∫rias", "Salamandarrias", "Quetaraban√°ssia", "Turicandalas", "Shalabac√¢ntaras", "Nubiracandass√°ias", "Sandurim√©lias", "Flecha", "Escudo", "Manto", "Tocha", "Sentinela", "Profeta", "Chave", "Lan√ßa", "Trombeta", "Arauto", "Centelha", "Monte", "Torre", "Coluna", "Trono", "Selo", "Raiz", "Ramo", "Cajado", "Oliveira", "P√£o", "Fonte", "Manancial", "Estandarte", "Alian√ßa", "Luz", "Chama", "Rugido", "Ora√ß√£o", "Incenso", "Templo", "Redoma", "Elo", "Sacerdote", "Apost√≥lico", "Candelabro", "Escada", "Vento", "Rio", "Pastor", "Justo", "Peregrino", "Guia", "Anjo", "Fiador", "Conselheiro", "Ben√ß√£o", "Coroa", "Miseric√≥rdia", "Promessa", "Rei", "Servo", "Elias", "Eliseu", "Mois√©s", "Davi", "Gide√£o", "Josu√©", "Daniel", "No√©", "Abra√£o", "Isaque", "Jac√≥"];
    
    const nomesParte2 = [
      "de Jeov√°", "do Eterno", "da Salva√ß√£o", "de Fogo", "do Esp√≠rito", "da Reden√ß√£o", "Celestial", "da Provid√™ncia", "da Promessa", "do Evangelho", "do Justo", "da Verdade", "do Para√≠so", "da Gl√≥ria", "da Promessa", "da Eternidade", "do Salvador", "da Reden√ß√£o", "da Gra√ßa", "da Esperan√ßa", "da Cria√ß√£o", "da Miseric√≥rdia", "da Justi√ßa", "do Alt√≠ssimo", "da F√©", "do Redentor", "do Caminho", "do Le√£o", "do Cordeiro", "da Rocha", "do Monte", "do Trono", "do Jardim", "da Luz", "do Reino", "da Terra", "da Un√ß√£o", "do Clamor", "da Trombeta", "do Altar", "do Louvor", "da Paz", "da Gl√≥ria", "do Mar", "da Fonte", "da Sar√ßa", "do C√©u", "do C√°lice", "do Vaso", "do Oleiro", "da Alian√ßa", "do Ungido", "do Pastor", "da Videira", "do Sacerdote", "do Profeta", "do Servo", "da Palavra", "do Caminho", "do Santu√°rio", "da Justi√ßa", "do Poder", "do Fogo", "do Candelabro", "do Manto", "da Coroa", "do Tabern√°culo", "da Vit√≥ria", "da Coluna", "da Rocha Eterna", "do Rio de Vida", "do Mar de Vidro"];
    
    // Elementos da p√°gina
    const btn = document.getElementById("sorteioBtn");
    const slotItems1 = document.getElementById("slotItems1");
    const slotItems2 = document.getElementById("slotItems2");
    const installButton = document.getElementById("installButton");
    const fireContainer = document.getElementById("fireContainer");
    const backgroundAudio = document.getElementById("backgroundAudio");
    const toggleAudioBtn = document.getElementById("toggleAudio");
    
    // Configura√ß√£o para gerenciar os sons de clique
    const clickSounds = [];
    for (let i = 1; i <= 10; i++) {
      clickSounds.push(document.getElementById(`clickSound${i}`));
    }
    
    // Vari√°vel para guardar o √≠ndice do √∫ltimo som reproduzido
    let lastSoundIndex = -1;
    
    // Fun√ß√£o para tocar um som de clique aleat√≥rio (sem repetir o √∫ltimo)
    function playRandomClickSound() {
      let randomIndex;
      // Garantir que n√£o toque o mesmo som duas vezes seguidas
      do {
        randomIndex = Math.floor(Math.random() * clickSounds.length);
      } while (randomIndex === lastSoundIndex && clickSounds.length > 1);
      
      // Atualizar o √≠ndice do √∫ltimo som
      lastSoundIndex = randomIndex;
      
      // Parar o som, se estiver tocando
      clickSounds[randomIndex].pause();
      clickSounds[randomIndex].currentTime = 0;
      
      // Tocar o som
      clickSounds[randomIndex].play().catch(error => {
        console.log("Erro ao reproduzir som de clique:", error);
      });
    }
    
    // Controles de som de fundo
    let isAudioPlaying = false;
    
    toggleAudioBtn.addEventListener("click", () => {
      if (isAudioPlaying) {
        backgroundAudio.pause();
        toggleAudioBtn.textContent = "üîá";
      } else {
        backgroundAudio.play().catch(error => {
          console.log("Erro ao reproduzir som de fundo:", error);
        });
        toggleAudioBtn.textContent = "üîä";
      }
      isAudioPlaying = !isAudioPlaying;
    });
    
    // Iniciar som de fundo automaticamente quando o usu√°rio interage com a p√°gina
    document.addEventListener("click", () => {
      if (!isAudioPlaying) {
        backgroundAudio.play().catch(error => {
          console.log("Erro ao reproduzir som de fundo:", error);
        });
        isAudioPlaying = true;
        toggleAudioBtn.textContent = "üîä";
      }
    }, { once: true });
    
    // Vari√°veis para controle da instala√ß√£o
    let deferredPrompt;
    
    // Criar chamas para o efeito de fogo
    for (let i = 0; i < 50; i++) {
      const flame = document.createElement('div');
      flame.className = 'flame';
      flame.style.left = `${Math.random() * 100}%`;
      flame.style.width = `${10 + Math.random() * 30}px`;
      flame.style.height = `${50 + Math.random() * 50}px`;
      flame.style.animationDelay = `${Math.random() * 2}s`;
      fireContainer.appendChild(flame);
    }
    
    // Inicializar os slots com os nomes
    function initializeSlots() {
      // Limpar slots
      slotItems1.innerHTML = '';
      slotItems2.innerHTML = '';
      
      // Criar item vazio inicial para cada slot
      const emptyItem1 = document.createElement('div');
      emptyItem1.className = 'slot-item';
      emptyItem1.innerHTML = '???';
      slotItems1.appendChild(emptyItem1);
      
      const emptyItem2 = document.createElement('div');
      emptyItem2.className = 'slot-item';
      emptyItem2.innerHTML = '???';
      slotItems2.appendChild(emptyItem2);
      
      // Adicionar todos os nomes aos slots
      nomesParte1.forEach(nome => {
        const item = document.createElement('div');
        item.className = 'slot-item';
        item.textContent = nome;
        slotItems1.appendChild(item);
      });
      
      nomesParte2.forEach(nome => {
        const item = document.createElement('div');
        item.className = 'slot-item';
        item.textContent = nome;
        slotItems2.appendChild(item);
      });
      
      // Posicionar os slots para mostrar o item vazio
      slotItems1.style.top = '0px';
      slotItems2.style.top = '0px';
    }
    
    // Fun√ß√£o para sortear um item
    function spinSlot(slotElement, items, callback) {
      const randomIndex = Math.floor(Math.random() * items.length);
      const selectedItem = items[randomIndex];
      
      // Calcular a posi√ß√£o final: 100px por item (altura do slot-item)
      const finalPosition = -((randomIndex + 1) * 100);
      
      // Animar o slot
      slotElement.style.top = finalPosition + 'px';
      
      // Callback com o item selecionado ap√≥s a anima√ß√£o
      setTimeout(() => {
        if (callback) callback(selectedItem);
      }, 3000); // Tempo da anima√ß√£o (3s)
    }
    
    // Inicializar os slots no carregamento
    initializeSlots();
    
    // Evento de clique no bot√£o de sorteio
    btn.addEventListener("click", function() {
      // Tocar som de clique aleat√≥rio
      playRandomClickSound();
      
      btn.disabled = true;
      
      // Reinicializar os slots
      initializeSlots();
      
      // Aguardar um momento para garantir que os slots foram reinicializados
      setTimeout(() => {
        // Sortear o primeiro slot
        spinSlot(slotItems1, nomesParte1, (nome1) => {
          // Ap√≥s o primeiro sorteio, iniciar o segundo com um pequeno atraso
          setTimeout(() => {
            spinSlot(slotItems2, nomesParte2, (nome2) => {
              // Ap√≥s ambos os sorteios, habilitar o bot√£o novamente
              setTimeout(() => {
                btn.disabled = false;
              }, 500);
            });
          }, 500);
        });
      }, 100);
    });
    
    // Registro do Service Worker para PWA
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('service-worker.js')
          .then(reg => {
            console.log('Service worker registrado!', reg);
          })
          .catch(err => {
            console.log('Erro ao registrar service worker:', err);
          });
      });
    }
    
    // Evento para detectar quando o app pode ser instalado
    window.addEventListener('beforeinstallprompt', (e) => {
      // Prevenir o comportamento padr√£o do Chrome
      e.preventDefault();
      // Armazenar o evento para usar posteriormente
      deferredPrompt = e;
      // Mostrar o bot√£o de instalar
      installButton.style.display = 'block';
    });
    
    // Evento de clique no bot√£o instalar
    installButton.addEventListener('click', async () => {
      if (!deferredPrompt) {
        return;
      }
      // Tocar um som de clique aleat√≥rio
      playRandomClickSound();
      
      // Mostrar o prompt de instala√ß√£o
      deferredPrompt.prompt();
      // Esperar pela escolha do usu√°rio
      const { outcome } = await deferredPrompt.userChoice;
      console.log(`Usu√°rio ${outcome === 'accepted' ? 'aceitou' : 'recusou'} a instala√ß√£o`);
      // Limpar a refer√™ncia
      deferredPrompt = null;
      // Esconder bot√£o ap√≥s a decis√£o
      installButton.style.display = 'none';
    });
    
    // Esconder o bot√£o se o app j√° est√° instalado
    window.addEventListener('appinstalled', () => {
      installButton.style.display = 'none';
      deferredPrompt = null;
      console.log('Aplicativo instalado');
    });
  </script>
</body>
</html>